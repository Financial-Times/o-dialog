/////
/// @group o-overlay
/// @link http://registry.origami.ft.com/components/o-overlay
////

/// Helper mixin to target IE8
///
/// @access private
@mixin _oOverlayTargetIE8 {
	@media \0screen {
		@content;
	}
}

/// Base overlay close style
@mixin oOverlayClose {
	@include _oOverlayCloseIcon(oColorsGetColorFor(o-overlay-close, text));
	box-sizing: content-box;
	float: right;
	position: relative;
	margin-top: 10px; // Align with the text baseline (magic number)
	margin-right: 10px; // Same right spacing as the top one
	margin-left: 10px;
	margin-bottom: 10px;
	width: 20px;
	height: 20px;
	padding: 0.25em;
	// Equivalent to `50%`, but avoids a rendering bug in old WebKit
	border-radius: 9999px;
	cursor: pointer;
	font-size: 8px;
	line-height: 1;
	user-select: none;
	outline: none; // Remove focus ring (focus state is set below)

	// Increase hit zone of the button around it for better usability
	&:after {
		position: absolute;
		content: '';
		top: -10px;
		right: -10px;
		left: -10px;
		bottom: -10px;
	}
}

/// Base overlay close icon style
// To avoid introducing a dependency on o-icons, which would make this a major
// release, this code uses nearly the same code as found in o-icons'
// oFtIconsGetSvg mixin. When a major release is due, this should also be updated
// to use the o-icons dependency
@mixin _oOverlayCloseIcon($color) {
	$service-url: "https://www.ft.com/__origami/service/image/v2/images/raw/fticon-v1:cross";
	$query: "?source=ooverlay";

	$color: str-slice(ie-hex-str($color), 4);
	$query: $query + "&tint=%23#{$color},%23#{$color}";


	background-image: url($service-url + $query + "&format=svg");

	// ie7/8 fallback. Uses the `\9` selector hack to target ie6-8.
	// Hack is documented here: http://browserhacks.com/#hack-ab1bcc7b3a6544c99260f7608f8e845e
	background-image: url($service-url + $query + "&format=png&width=20")\9;
	background-size: contain;
}

/// Base overlay close icon style // deprecate this
@mixin oOverlayCloseIcon {
	@include oOverlayClose;
}
